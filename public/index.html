async function processDownload() {
    const urlInput = document.getElementById('videoUrl');
    const btn = document.getElementById('dlBtn');
    const resultArea = document.getElementById('resultArea');
    const downloadLink = document.getElementById('downloadLink');

    if (!urlInput.value) return alert("Tempel link videonya dulu!");

    btn.disabled = true;
    btn.innerText = "‚è≥ Sedang Memproses...";
    resultArea.style.display = "none";

    try {
        const response = await fetch(`/api/download?url=${encodeURIComponent(urlInput.value)}`);
        const data = await response.json();

        if (data.success) {
            downloadLink.href = data.download_url;
            resultArea.style.display = "block";
            // Otomatis scroll ke bawah agar link terlihat
            resultArea.scrollIntoView({ behavior: 'smooth' });
        } else {
            // Tampilkan pesan error asli dari API
            alert("Oops! " + data.message);
        }
    } catch (e) {
        alert("Gagal terhubung ke server. Periksa koneksi internet kamu.");
    } finally {
        btn.disabled = false;
        btn.innerText = "Unduh Video";
    }
}
