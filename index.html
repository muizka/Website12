async function processDownload() {
    const urlInput = document.getElementById('videoUrl');
    const btn = document.getElementById('dlBtn');
    const resultArea = document.getElementById('resultArea');
    const downloadLink = document.getElementById('downloadLink');

    if (!urlInput.value) return alert("Tempel link videonya dulu!");

    btn.disabled = true;
    btn.innerText = "‚è≥ Sedang Memproses...";
    resultArea.style.display = "none";

    try {
        // Memanggil API lokal Vercel kamu
        const response = await fetch(`/api/download?url=${encodeURIComponent(urlInput.value)}`);
        const data = await response.json();

        if (data.success) {
            downloadLink.href = data.download_url;
            resultArea.style.display = "block";
            // Memaksa browser mengunduh (jika didukung)
            downloadLink.setAttribute('download', 'video.mp4');
        } else {
            alert("Gagal: " + data.message);
        }
    } catch (e) {
        alert("Terjadi kesalahan sistem. Coba lagi.");
    } finally {
        btn.disabled = false;
        btn.innerText = "Unduh Video";
    }
}
